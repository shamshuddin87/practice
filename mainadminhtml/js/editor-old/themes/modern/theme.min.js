tinymce.ThemeManager.add("modern",function(e){function t(t,n){var i,a=[];return t?(p(t.split(/[ ,]/),function(t){function r(){function n(e){return function(n,i){for(var a,r=i.parents.length;r--&&(a=i.parents[r].nodeName,"OL"!=a&&"UL"!=a););t.active(n&&a==e)}}var i=e.selection;"bullist"==o&&i.selectorChanged("ul > li",n("UL")),"numlist"==o&&i.selectorChanged("ol > li",n("OL")),t.settings.stateSelector&&i.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&i.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var o;"|"==t?i=null:f.has(t)?(t={type:t,size:n},a.push(t),i=null):(i||(i={type:"buttongroup",items:[]},a.push(i)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=f.create(t),i.items.push(t),e.initialized?r():e.on("init",r)))}),{type:"toolbar",layout:"flow",items:a}):void 0}function n(e){function n(n){return n?(i.push(t(n,e)),!0):void 0}var i=[];if(tinymce.isArray(h.toolbar)){if(0===h.toolbar.length)return;tinymce.each(h.toolbar,function(e,t){h["toolbar"+(t+1)]=e}),delete h.toolbar}for(var a=1;10>a&&n(h["toolbar"+a]);a++);return i.length||h.toolbar===!1||n(h.toolbar||y),i.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}:void 0}function i(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var i,a,r,o,s;if(s=tinymce.makeMap((h.removed_menuitems||"").split(/[ ,]/)),h.menu?(a=h.menu[n],o=!0):a=v[n],a){i={text:a.title},r=[],p((a.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!s[e]&&r.push(t(e))}),o||p(e.menuItems,function(e){e.context==n&&("before"==e.separator&&r.push({text:"|"}),e.prependToContext?r.unshift(e):r.push(e),"after"==e.separator&&r.push({text:"|"}))});for(var l=0;l<r.length;l++)"|"==r[l].text&&(0!==l&&l!=r.length-1||r.splice(l,1));if(i.menu=r,!i.menu.length)return null}return i}var i,a=[],r=[];if(h.menu)for(i in h.menu)r.push(i);else for(i in v)r.push(i);for(var o="string"==typeof h.menubar?h.menubar.split(/[ ,]/):r,s=0;s<o.length;s++){var l=o[s];l=n(l),l&&a.push(l)}return a}function a(t){function n(e){var n=t.find(e)[0];n&&n.focus(!0)}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function r(t,n){function i(e){return{width:e.clientWidth,height:e.clientHeight}}var a,r,o,s;a=e.getContainer(),r=e.getContentAreaContainer().firstChild,o=i(a),s=i(r),null!==t&&(t=Math.max(h.min_width||100,t),t=Math.min(h.max_width||65535,t),m.setStyle(a,"width",t+(o.width-s.width)),m.setStyle(r,"width",t)),n=Math.max(h.min_height||100,n),n=Math.min(h.max_height||65535,n),m.setStyle(r,"height",n),e.fire("ResizeEditor")}function o(t,n){var i=e.getContentAreaContainer();u.resizeTo(i.clientWidth+t,i.clientHeight+n)}function s(){function n(){return e.contextToolbars||[]}function i(t){var n,i,a;return n=tinymce.DOM.getPos(e.getContentAreaContainer()),i=e.dom.getRect(t),a=e.dom.getRoot(),"BODY"==a.nodeName&&(i.x-=a.ownerDocument.documentElement.scrollLeft||a.scrollLeft,i.y-=a.ownerDocument.documentElement.scrollTop||a.scrollTop),i.x+=n.x,i.y+=n.y,i}function a(){p(e.contextToolbars,function(e){e.panel&&e.panel.hide()})}function r(e,t,n){t=t?t.substr(0,2):"",p({t:"down",b:"up"},function(i,a){e.classes.toggle("arrow-"+i,n(a,t.substr(0,1)))}),p({l:"left",r:"right"},function(i,a){e.classes.toggle("arrow-"+i,n(a,t.substr(1,1)))})}function o(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}}function s(e,t,n,i,a){return a=o({x:e,y:t,w:a.w,h:a.h}),h.inline_toolbar_position_handler&&(a=h.inline_toolbar_position_handler({elementRect:o(n),contentAreaRect:o(i),panelRect:a})),a}function l(e,t){e.moveTo(t.left,t.top)}function c(t){var n,o,c,d,u,h,f,p;if(!e.removed){if(!t||!t.toolbar.panel)return void a();f=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=t.toolbar.panel,u.show(),c=i(t.element),o=tinymce.DOM.getRect(u.getEl()),d=tinymce.DOM.getRect(e.getContentAreaContainer()||e.getBody()),p=25,c.w=t.element.clientWidth,c.h=t.element.clientHeight,e.inline||(d.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&c.w<p&&(c=g.inflate(c,0,8)),n=g.findBestRelativePosition(o,c,d,f),c=g.clamp(c,d),n?(h=g.relativePosition(o,c,n),l(u,s(h.x,h.y,c,d,o))):(d.h+=o.h,c=g.intersect(d,c),c?(n=g.findBestRelativePosition(o,c,d,["bc-tc","bl-tl","br-tr"]),n?(h=g.relativePosition(o,c,n),l(u,s(h.x,h.y,c,d,o))):l(u,s(c.x,c.y,c,d,o))):u.hide()),r(u,n,function(e,t){return e===t})}}function d(){function t(){e.selection&&c(v(e.selection.getNode()))}tinymce.util.Delay.requestAnimationFrame(t)}function u(){y||(y=e.selection.getScrollContainer()||e.getWin(),tinymce.$(y).on("scroll",d),e.on("remove",function(){tinymce.$(y).off("scroll")}))}function m(n){var i;return n.toolbar.panel?(n.toolbar.panel.show(),void c(n)):(u(),i=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:t(n.toolbar.items),oncancel:function(){e.focus()}}),n.toolbar.panel=i,i.renderTo(document.body).reflow(),void c(n))}function b(){tinymce.each(n(),function(e){e.panel&&e.panel.hide()})}function v(t){var i,a,r,o=n();for(r=e.$(t).parents().add(t),i=r.length-1;i>=0;i--)for(a=o.length-1;a>=0;a--)if(o[a].predicate(r[i]))return{toolbar:o[a],element:r[i]};return null}var y;e.on("click keyup setContent",function(t){("setcontent"!=t.type||t.selection)&&tinymce.util.Delay.setEditorTimeout(e,function(){var t;t=v(e.selection.getNode()),t?(b(),m(t)):b()})}),e.on("blur hide",b),e.on("ObjectResizeStart",function(){var t=v(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("nodeChange ResizeEditor ResizeWindow",d),e.on("remove",function(){tinymce.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=v(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})}function l(e){return function(){e.initialized?e.fire("SkinLoaded"):e.on("init",function(){e.fire("SkinLoaded")})}}function c(t){function r(){if(p&&p.moveRel&&p.visible()&&!p._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),i=0,a=0;if(t){var r=m.getPos(n),o=m.getPos(t);i=Math.max(0,o.x-r.x),a=Math.max(0,o.y-r.y)}p.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,a)}}function o(){p&&(p.show(),r(),m.addClass(e.getBody(),"mce-edit-focus"))}function c(){p&&(p.hide(),b.hideAll(),m.removeClass(e.getBody(),"mce-edit-focus"))}function d(){return p?void(p.visible()||o()):(p=u.panel=f.create({type:g?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!g,border:1,items:[h.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},n(h.toolbar_items_size)]}),e.fire("BeforeRenderUI"),p.renderTo(g||document.body).reflow(),a(p),o(),s(),e.on("nodeChange",r),e.on("activate",o),e.on("deactivate",c),void e.nodeChanged())}var p,g;return h.fixed_toolbar_container&&(g=m.select(h.fixed_toolbar_container)[0]),h.content_editable=!0,e.on("focus",function(){t.skinUiCss?tinymce.DOM.styleSheetLoader.load(t.skinUiCss,d,d):d()}),e.on("blur hide",c),e.on("remove",function(){p&&(p.remove(),p=null)}),t.skinUiCss&&tinymce.DOM.styleSheetLoader.load(t.skinUiCss,l(e)),{}}function d(t){function o(){return function(e){"readonly"==e.mode?c.find("*").disabled(!0):c.find("*").disabled(!1)}}var c,d,p;return t.skinUiCss&&tinymce.DOM.styleSheetLoader.load(t.skinUiCss,l(e)),c=u.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[h.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},n(h.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),h.resize!==!1&&(d={type:"resizehandle",direction:h.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;p={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){"both"==h.resize?r(p.width+e.deltaX,p.height+e.deltaY):r(null,p.height+e.deltaY)}}),h.statusbar!==!1&&c.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},d]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",o()),c.renderBefore(t.targetNode).reflow(),h.readonly&&e.setMode("readonly"),h.width&&tinymce.DOM.setStyle(c.getEl(),"width",h.width),e.on("remove",function(){c.remove(),c=null}),a(c),s(),{iframeContainer:c.find("#iframe")[0].getEl(),editorContainer:c.getEl()}}var u=this,h=e.settings,f=tinymce.ui.Factory,p=tinymce.each,m=tinymce.DOM,g=tinymce.geom.Rect,b=tinymce.ui.FloatPanel,v={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},y="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";u.renderUI=function(t){var n=h.skin!==!1?h.skin||"lightgray":!1;if(n){var i=h.skin_url;i=i?e.documentBaseURI.toAbsolute(i):tinymce.baseURL+"/skins/"+n,tinymce.Env.documentMode<=7?t.skinUiCss=i+"/skin.ie7.min.css":t.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){u.throbber=u.throbber||new tinymce.ui.Throbber(u.panel.getEl("body")),e.state?u.throbber.show(e.time):u.throbber.hide()}),h.inline?c(t):d(t)},u.resizeTo=r,u.resizeBy=o});